:root {
  --frame: #6a4a2b;
  --frame-dark: #4c331e;
  --paper: #e7d7b3;
  --olive: #3b4a26;
  --olive-2: #31401f;
  --gold: #d7b45a;
  --text: #f2f0e8;
  --hubBarH: 55px;
  --contentPadY: 28px; /* matches .contentArea vertical padding (14px top + 14px bottom on mobile) */
  --calGapAboveHub: 10px;
  --calPanelH: 520px;

}

* { box-sizing: border-box; }
html, body { height: 100%; width: 100%; overflow: hidden; overscroll-behavior-x: none;}
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: #222; overscroll-behavior: none; -webkit-overflow-scrolling: auto; touch-action: manipulation; }
#root { height: 100%; overflow: hidden; }

.appShell {
  height: 100vh;
  height: 100dvh;
  display: flex;
  background: var(--frame-dark);
  padding: 16px;
  overflow: hidden;
  overscroll-behavior-x: none;
}

.sidebar {
  width: 110px;
  background: linear-gradient(180deg, #2c3a1b, #223015);
  border: 6px solid var(--frame);
  border-radius: 12px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.35);
  padding: 12px 10px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.sidebarInner { width: 100%; display: flex; flex-direction: column; align-items: center; }
.hubSpacer { height: 14px; }

.hubNav { display: flex; flex-direction: column; gap: 18px; align-items: center; width: 100%; }

.hubItem { width: 70px; height: 70px; border-radius: 16px; display: grid; place-items: center; text-decoration: none; position: relative; background: rgba(0,0,0,0.08); border: 0; box-shadow: none; }

/* active hub: lighter background (no aura, no border) */
.hubItem.hubActive { background: rgba(255,255,255,0.14); }

.hubItem:active { transform: translateY(1px); }

.hubIcon { font-size: 30px; line-height: 1; }

.hubCalendar {
  width: 82px;
  height: 96px;
  border-radius: 14px;
  background: rgba(0,0,0,0.12);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.hubIconCalendar { font-size: 32px; }

.hubDate, .hubSub {
  color: #2b1c0f;
  background: linear-gradient(180deg, #f1e3bf, #e4d3a5);
  border: 2px solid var(--frame);
  padding: 2px 4px;
  border-radius: 8px;
  font-weight: 800;
  font-size: 14px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
}

.mainColumn {
  flex: 1;
  margin-left: 16px;
  border: 6px solid var(--frame);
  border-radius: 12px;
  background: var(--olive);
  box-shadow: 0 10px 20px rgba(0,0,0,0.35);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.topBar {
  height: 76px;
  background: linear-gradient(180deg, var(--olive-2), #263418);
  border-bottom: 4px solid var(--frame);
  display: grid;
  grid-template-columns: 1fr 80px;
  align-items: center;
  padding: 0 18px;
  color: var(--text);
}

.spoonsBlock { display: flex; align-items: center; gap: 12px; }
.spoonsCount { font-size: 28px; font-weight: 800; color: #f5e8c5; }
.spoonsIcons .spoon { margin-right: 6px; filter: drop-shadow(0 2px 0 rgba(0,0,0,0.2)); }

.fatigueOuter {
  height: 16px;
  border: 2px solid #b48a36;
  border-radius: 6px;
  background: rgba(0,0,0,0.25);
  overflow: hidden;
  max-width: 760px;
  margin: 0 auto;
}

.fatigueInner {
  height: 100%;
  background: linear-gradient(90deg, #f1c86a, #d28a2e);
}

.infoButton {
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.08);
  color: var(--text);
  font-weight: 800;
  cursor: pointer;
}

.contentArea {
  flex: 1;
  padding: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.pageWrap { width: 100%; max-width: 900px; color: var(--text); }
.pageWrap h1 { margin: 0 0 10px 0; }

.spoonsPage { width: 100%; display: flex; justify-content: center; }
.restRow {
  width: min(980px, 100%);
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 26px;
  align-items: center;
  justify-items: center;
}

.restCard {
  width: 100%;
  max-width: 290px;
  height: 260px;
  border: 4px solid var(--frame);
  border-radius: 14px;
  background: rgba(0,0,0,0.08);
  color: var(--text);
  cursor: pointer;
  padding: 18px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.restEmoji { font-size: 64px; }
.restTitle { font-size: 22px; font-weight: 800; }
.restSubtitle { opacity: 0.85; }

.primaryBtn {
  padding: 10px 14px;
  border-radius: 10px;
  border: 2px solid rgba(255,255,255,0.25);
  background: rgba(255,255,255,0.12);
  color: var(--text);
  cursor: pointer;
}

/* =========================
   SETTINGS TAB RAIL (horizontal swipe)
========================= */
.settingsTabRailWrap { position: relative; margin: 10px 0 16px 0; width: 100%; max-width: 720px; }

.settingsTabRailTop { display: block; }
.settingsTabRailBottom { display: none; }

/* Mobile: bottom settings tabs fixed above hub bar */
@media (max-width: 820px) and (orientation: portrait) {
  .settingsTabRailTop { display: none; }
  .settingsTabRailBottom {
    display: block;
    position: fixed;
    left: 0;
    right: 0;
    bottom: calc(var(--hubBarH) + env(safe-area-inset-bottom));
    z-index: 65;
    padding: 10px 12px;
    margin: 0;
    max-width: none;
  }

  /* Make the rail span nicely on mobile */
  .settingsTabRailBottom .settingsTabRail {
    border-radius: 16px;
  }

  /* Important: give the page room so content isn't hidden behind the fixed rail */
  .pageWrap {
    padding-bottom: calc(var(--hubBarH) + 66px + env(safe-area-inset-bottom));
  }
}
.settingsTabRail { display: flex; gap: 10px; padding: 8px 12px; overflow-x: auto; overflow-y: hidden; scrollbar-width: none; -webkit-overflow-scrolling: touch; background: rgba(0,0,0,0.10); border: 2px solid rgba(255,255,255,0.12); border-radius: 999px; }
.settingsTabRail::-webkit-scrollbar { display: none; }
.settingsTabPill { appearance: none; border: 2px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.06); color: inherit; padding: 10px 14px; border-radius: 999px; font-weight: 900; white-space: nowrap; cursor: pointer; user-select: none; }
.settingsTabPill.isActive { background: rgba(255,255,255,0.16); border-color: rgba(255,255,255,0.26); }
/* =========================
   WATER CUP (SVG)
========================= */
.waterCupHit { width: 240px; height: 360px; touch-action: none; user-select: none; display: grid; place-items: center; }
.waterCupSvg { display: block; width: 240px; height: 360px; }
.waterPendingBadge { font-weight: 1000; font-size: 12px; padding: 6px 8px; border-radius: 12px; background: rgba(0,0,0,0.28); border: 1px solid rgba(255,255,255,0.18); color: rgba(255,255,255,0.95); text-align: right; }
.waterFillEase { transition: y 160ms ease-out; }
.waterSurface { transform-origin: 50% 50%; animation: waterWiggle 2.2s ease-in-out infinite; }
.waterSurface.active { animation: none; }
@keyframes waterWiggle { 0% { transform: translateY(0px); } 50% { transform: translateY(1.5px); } 100% { transform: translateY(0px); } }


/* --- Top status layout (desktop/default) --- */
.topStatus {
  display: grid;
  grid-template-columns: auto minmax(0, 1fr);
  align-items: center;
  gap: 16px;
  width: 100%;
}

.fatigueOuter {
  height: 16px;
  border: 2px solid #b48a36;
  border-radius: 6px;
  background: rgba(0,0,0,0.25);
  overflow: hidden;
  width: 100%;
  max-width: 760px;
  margin: 0 auto;
}

:root { --folderBarH: 66px; --toggleBarH: 58px; }

.folderBarMobile { display: none; }
.inputTasksToggleBarMobile { display: none; }
.optEmojiRowMobile { display: none; }

/* InputTasks mobile centering + sizing */
.optEmojiRowMobile { display: none; }

@media (max-width: 820px) and (orientation: portrait) {
  .mainColumn { padding-bottom: calc(var(--hubBarH) + var(--folderBarH) + var(--toggleBarH) + env(safe-area-inset-bottom)); }

  .inputTasksToggleBarMobile {
    display: block !important;
    position: fixed;
    left: 0;
    right: 0;
    bottom: calc(var(--hubBarH) + var(--folderBarH) + env(safe-area-inset-bottom));
    height: var(--toggleBarH);
    padding: 8px 12px;
    background: linear-gradient(180deg, rgba(37,50,22,0.96), rgba(30,42,18,0.96));
    border-top: 2px solid rgba(0,0,0,0.18);
    z-index: 61;
  }

  .optEmojiRowMobile {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr);
    gap: 18px;
    justify-items: center;
    margin: 0 !important;
  }
  .optEmojiRowMobile { display: grid !important; grid-template-columns: repeat(3, 1fr); gap: 18px; justify-items: center; margin: 6px 0 10px; }
  .inputTasksRight { width: 100%; max-width: none !important; }
  .inputTasksForm { justify-items: center; }
  .itField { width: 100%; display: grid; justify-items: center; }
  .itLabel { width: 100% !important; min-width: 0 !important; text-align: center !important; }
  .itInput { width: min(520px, 92vw) !important; min-width: 0 !important; }
  .itTextarea { width: min(520px, 92vw) !important; }
  .itDateTimeRow { grid-template-columns: 1fr !important; justify-items: center; }
  .itSpoonsRow { grid-template-columns: 1fr !important; justify-items: center; width: 100%; }
  .itBottomRow { justify-content: center !important; flex-direction: column; align-items: center !important; gap: 12px !important; text-align: center; }

  /* Make the due date button fit mobile */
  .itDateTimeRow button[ref] { width: min(520px, 92vw) !important; } /* harmless if it doesn't match; we also handle below */
}

/* safer: target your due-date button via the inline width in the DOM container */
@media (max-width: 820px) and (orientation: portrait) {
  .itDateTimeRow > div > div { width: 100% !important; min-width: 0 !important; }
  .itDateTimeRow > div button { width: min(520px, 92vw) !important; }
}

/* --- Mobile PORTRAIT only --- */
@media (max-width: 820px) and (orientation: portrait) {
  .appShell { padding: 0; flex-direction: column; }

  .inputTasksLeft { display: none !important; }
  .mainColumn { padding-bottom: calc(var(--hubBarH) + var(--folderBarH) + env(safe-area-inset-bottom)); }
  .folderBarMobile { display: block !important; position: fixed; left: 0; right: 0; bottom: calc(var(--hubBarH) + env(safe-area-inset-bottom)); height: var(--folderBarH); padding: 10px 12px; background: linear-gradient(180deg, rgba(37,50,22,0.96), rgba(30,42,18,0.96)); border-top: 3px solid rgba(0,0,0,0.20); z-index: 60; }
  .folderBarScroll::-webkit-scrollbar { height: 0; }
  .folderDrawerOverlay { display: grid !important; place-items: end center; position: fixed; inset: 0; background: rgba(0,0,0,0.45); z-index: 70; padding-bottom: calc(var(--hubBarH) + var(--folderBarH) + env(safe-area-inset-bottom) + 10px); }
  .folderDrawerPanel { margin-bottom: 0; }

  .calTimeGridSurface { min-width: 0; } /* allow it to fit viewport */
  .calTimeHeaderCols, .calAllDayCols, .calTimeGridSurface { width: 100%; }
  .calGrid { min-height: 360px; }

  .sidebar {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: calc(var(--hubBarH) + env(safe-area-inset-bottom));
    border-radius: 0;
    border-left: 0;
    border-right: 0;
    border-bottom: 0;
    border-top: 6px solid var(--frame);
    padding: 0 10px 0;
    z-index: 50;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .sidebarInner { width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; }

  .hubNav { flex-direction: row; justify-content: space-around; gap: 0; width: 100%; height: 100%; align-items: center; }

  /* Make button height respond to bar height so centering is always possible */
  .hubItem { width: 56px; height: calc(var(--hubBarH) - 10px); border-radius: 14px; }

  .hubIcon { font-size: 24px; }
  .hubSub { display: block; font-size: 10px; margin-top: 2px; }

  .mainColumn {
    margin-left: 0;
    border-radius: 0;
    border-left: 0;
    border-right: 0;
    border-bottom: 0;
    order: 1;
    flex: 1;
    min-height: 0;
    padding-bottom: calc(var(--hubBarH) + env(safe-area-inset-bottom));
  }

  /* Top bar: spoons row, fatigue row below */
  .topBar { grid-template-columns: 1fr 56px; height: auto; padding: 10px 12px; row-gap: 10px; }
  .topStatus { grid-column: 1 / 2; grid-template-columns: 1fr; grid-template-rows: auto auto; gap: 8px; }
  .fatigueOuter { width: 100%; max-width: none; margin: 0; }
  .topRight { grid-column: 2 / 3; grid-row: 1 / 2; justify-self: end; align-self: start; }

  .contentArea { padding: 10px 12px 6px; align-items: flex-start; }

  /* Rests stacked vertically */
  .restRow { grid-template-columns: 1fr; gap: 14px; }
  .restCard { height: 160px; max-width: 520px; }
  .calHideMobile { display: none !important; }
  .hubNav { transform: translateY(-3px); }

  /* Put mobile-only vars on html/body instead of :root in a media query */
  html { --calPanelH: auto; }

  /* Make the content column a real "fill remaining height" container */
  .contentArea { flex: 1; min-height: 0; align-items: stretch; justify-content: center; }

  /* Let CalendarPage fill the available height above the hub bar padding */
  .pageWrap { height: 100%; min-height: 0; display: flex; flex-direction: column; }
  .calendarWrap { flex: 1; min-height: 0; display: flex; flex-direction: column; }

  /* Make the calendar body take remaining space under its header rows */
  .calBody { flex: 1; min-height: 0; display: flex; flex-direction: column; }

  /* Month panel and time panel should just fill the available body space */
  .calMonthView { height: 100%; min-height: 0; }
  .calTimeScroll { height: 100%; min-height: 0; }

  .calTaskDragHandle { opacity: 1; }
}

@media (max-height: 520px) and (orientation: landscape) {
  .appShell { padding: 10px; touch-action: pan-y; }

  /* move sidebar to the RIGHT */
  .sidebar { order: 2; width: 96px; padding: 10px 8px; border-radius: 12px; }
  .mainColumn { order: 1; margin-left: 0; margin-right: 12px; }

  /* tighter vertical spacing + smaller buttons so all fit */
  .hubNav { gap: 12px; }
  .hubItem { width: 56px; height: 56px; border-radius: 14px; }
  .hubIcon { font-size: 24px; }
  .hubSub { font-size: 10px; padding: 2px 5px; }
}

.topRight { display: flex; justify-content: flex-end; }

.calendarWrap { max-width: 1100px; }
.calTopRow { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.calViewGroup { display: flex; gap: 10px; flex-wrap: wrap; }
.calSecondRow { display: flex; align-items: center; gap: 12px; margin-bottom: 14px; position: relative; }
.calArrowGroup { display: flex; gap: 8px; }
.calBtn { padding: 10px 14px; border-radius: 10px; border: 2px solid rgba(255,255,255,0.18); background: rgba(0,0,0,0.12); color: var(--text); cursor: pointer; font-weight: 800; }
.calBtn:hover { background: rgba(0,0,0,0.18); }
.calBtnActive { border-color: rgba(215,180,90,0.8); box-shadow: inset 0 0 0 1px rgba(215,180,90,0.25); }
.calBtnPrimary { background: rgba(215,180,90,0.18); border-color: rgba(215,180,90,0.9); color: #fff3d0; }
.calArrow { width: 44px; display: inline-flex; align-items: center; justify-content: center; }
.calMonthPickerWrap { margin-left: auto; position: relative; }
.calMonthBtn { width: clamp(140px, 42vw, 220px); min-width: 0; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.calMonthPickerWrap { min-width: 0; }
.calSecondRow { flex-wrap: wrap; }

.calBody { width: 100%; }
.calMonthView { border: 3px solid rgba(0,0,0,0.18); border-radius: 14px; background: rgba(0,0,0,0.08); padding: 12px; display: flex; flex-direction: column; height: var(--calPanelH); min-height: 0; }

.calDowRow { display: grid; grid-template-columns: repeat(7, 1fr); gap: 8px; margin-bottom: 8px; flex: 0 0 auto; }

.calGrid { display: grid; grid-template-columns: repeat(7, 1fr); grid-template-rows: repeat(var(--calMonthRows, 6), 1fr); gap: 8px; flex: 1; min-height: 0; align-content: stretch; }

.calCell { width: 100%; height: 100%; min-height: 0; border-radius: 12px; border: 2px solid rgba(255,255,255,0.10); background: rgba(0,0,0,0.10); color: var(--text); cursor: pointer; display: flex; align-items: stretch; justify-content: flex-start; padding: 10px; }

.calCellMonth { flex-direction: column; }   /* IMPORTANT */
.calCellNum { font-weight: 900; width: 100%; text-align: left; line-height: 1; flex: 0 0 auto; }
.calCellTasks { width: 100%; flex: 1; min-height: 0; }

.calCellMonth { position: relative; overflow: hidden; }
.calCellTasks { margin-top: 6px; display: grid; gap: 4px; width: 100%; }
.calCellTaskLine { font-size: 12px; font-weight: 900; opacity: 0.95; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; }
.calCellTaskDone { opacity: 0.55; text-decoration: line-through; text-decoration-thickness: 2px; }
.calCellMore { font-size: 12px; font-weight: 1000; opacity: 0.85; text-align: left; }
.calGestureSurface { touch-action: none; }

/* Keep border/padding panel STATIC; only inner content moves */
.calAnimStage { position: relative; width: 100%; height: 100%; min-height: 0; overflow: hidden; }
.calAnimPane { position: absolute; inset: 0; width: 100%; height: 100%; min-height: 0; will-change: transform; backface-visibility: hidden; -webkit-font-smoothing: antialiased; transform: translateZ(0); }

/* Month inner wrapper (no border here; border is on .calMonthView) */
.calMonthInner { display: flex; flex-direction: column; height: 100%; min-height: 0; }

/* Time inner wrapper (no border here; border is on .calMonthView) */
.calTimeInner { height: 100%; min-height: 0; display: flex; flex-direction: column; }

/* Ensure buttons and divs render identical text metrics */
.calCell { font: inherit; }
.calCellMonth { font: inherit; }

.calCell:hover { background: rgba(0,0,0,0.16); }
.calCellMuted { opacity: 0.45; }
.calCellToday { outline: 2px solid rgba(215,180,90,0.55); outline-offset: 1px; }
.calCellSelected { outline: 2px solid rgba(255,255,255,0.75); outline-offset: 1px; }
.calAltView { border: 3px solid rgba(0,0,0,0.18); border-radius: 14px; background: rgba(0,0,0,0.08); padding: 18px; }
.calAltTitle { margin: 0 0 8px 0; }
.calAltRange { font-weight: 900; opacity: 0.95; margin-bottom: 10px; }
.calAltPlaceholder { opacity: 0.85; }

.calMonthPopover { position: absolute; top: 46px; right: 0; width: 240px; background: rgba(20,26,12,0.98); border: 3px solid var(--frame); border-radius: 14px; box-shadow: 0 14px 30px rgba(0,0,0,0.45); padding: 12px; z-index: 20; }
.calMonthPopoverHeader { font-weight: 1000; text-align: center; margin-bottom: 10px; color: #f5e8c5; }
.calMonthGrid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
.calMonthCell { padding: 10px 0; border-radius: 10px; border: 2px solid rgba(255,255,255,0.14); background: rgba(0,0,0,0.10); color: var(--text); cursor: pointer; font-weight: 900; }
.calMonthCell:hover { background: rgba(0,0,0,0.18); }
.calMonthCellActive { border-color: rgba(215,180,90,0.9); background: rgba(215,180,90,0.16); }

/* =========================
   CALENDAR TIME GRID (Outlook-ish)
========================= */

.calAllDayTask { cursor: grab; user-select: none; }
.calAllDayTask:active { cursor: grabbing; }

.calTimeView { padding: 0; }

.calTimeHeader {
  display: grid;
  grid-template-columns: 50px 1fr;
  background: rgba(0,0,0,0.08);
  border-bottom: 2px solid rgba(0,0,0,0.18);
}

.calTimeHeaderGutter { height: 56px; border-right: 2px solid rgba(0,0,0,0.18); }

.calTimeHeaderCols { display: grid; }

.calTimeHeaderCell {
  height: 56px;
  border: 0;
  background: transparent;
  color: var(--text);
  cursor: pointer;
  display: grid;
  align-content: center;
  justify-items: center;
  border-right: 2px solid rgba(255,255,255,0.06);
}

.calTimeHeaderCell:last-child { border-right: 0; }

.calTimeHeaderDow { font-weight: 900; opacity: 0.95; line-height: 1; }
.calTimeHeaderDom { font-weight: 800; font-size: 13px; opacity: 0.95; margin-top: 4px; }

/* fixed hour height: user must scroll to see all 24 hours */
:root { --calHourH: 64px; } /* tweak this if you want taller/shorter hours */

.calTimeScroll { display: grid; grid-template-columns: 50px 1fr; height: var(--calPanelH); overflow: auto; scrollbar-width: none; -ms-overflow-style: none; }
.calTimeScroll::-webkit-scrollbar { width: 0; height: 0; }

.calTimeGridArea { overflow: auto; background: rgba(0,0,0,0.02); -webkit-overflow-scrolling: touch; }
.calTimeGridArea::-webkit-scrollbar { height: 0; width: 0; }

.calTimeGridSurface { position: relative; display: grid; grid-auto-rows: var(--calHourH); min-width: 780px; }

.calNowLine { position: absolute; left: 0; right: 0; height: 2px; background: #d63a3a; z-index: 5; pointer-events: none; box-shadow: 0 0 0 1px rgba(0,0,0,0.25); }

.calTimeGutter {
  border-right: 2px solid rgba(0,0,0,0.18);
  background: rgba(0,0,0,0.06);
}

.calTimeGutterPos { position: relative; }

.calNowPill { position: absolute; left: 10px; transform: translateY(-50%); padding: 3px 10px; border-radius: 999px; border: 2px solid #d63a3a; background: rgba(20, 10, 10, 0.35); color: #ffd6d6; font-weight: 1000; font-size: 12px; z-index: 10; white-space: nowrap; box-shadow: 0 4px 10px rgba(0,0,0,0.35); }

.calNowPillConnector { position: absolute; top: 50%; right: -10px; width: 10px; height: 2px; background: #d63a3a; transform: translateY(-50%); }

.calTimeTickLabel { z-index: 1; }

.calTimeTick {
  height: var(--calHourH);
  position: relative;
}

.calTimeTickLabel {
  position: absolute;
  top: 8px;
  right: 6px;
  font-weight: 900;
  font-size: 11px;
  opacity: 0.9;
  white-space: nowrap;
}


/* a single surface that holds all horizontal + vertical lines */
.calTimeGridSurface {
  position: relative;
  display: grid;
  grid-auto-rows: var(--calHourH);
  min-width: 780px; /* keeps week readable */
}

.calCellTasks { margin-top: 6px; display: grid; gap: 4px; width: 100%; }
.calCellTaskLine { font-size: 12px; font-weight: 900; line-height: 14px; opacity: 0.95; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; text-align: left; }
.calCellMore { font-size: 12px; font-weight: 1000; line-height: 14px; opacity: 0.85; text-align: left; }

.calAllDayRow { display: grid; grid-template-columns: 50px 1fr; background: rgba(0,0,0,0.06); border-bottom: 2px solid rgba(0,0,0,0.18); }
.calAllDayGutter { padding: 10px; border-right: 2px solid rgba(0,0,0,0.18); font-weight: 1000; font-size: 12px; opacity: 0.9; }
.calAllDayCols { display: grid; }
.calAllDayCell { min-height: 56px; padding: 8px 10px; border-right: 2px solid rgba(255,255,255,0.06); display: grid; gap: 4px; align-content: start; }
.calAllDayCell:last-child { border-right: 0; }
.calAllDayTask { font-size: 12px; line-height: 14px; font-weight: 950; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; opacity: 0.95; }
.calAllDayTaskDone { opacity: 0.55; text-decoration: line-through; text-decoration-thickness: 2px; }
.calAllDayMore { font-size: 12px; line-height: 14px; font-weight: 1000; opacity: 0.85; }

/* each row spans full width */
.calTimeRow { position: relative; grid-column: 1 / -1; }

.calTimeHourLine {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  height: 2px;
  background: rgba(255,255,255,0.10);
}

.calTimeHalfLine {
  position: absolute;
  left: 0;
  right: 0;
  top: calc(var(--calHourH) / 2);
  height: 1px;
  border-top: 1px dotted rgba(255,255,255,0.16);
}

/* vertical separators between days (not in Day view) */
.calTimeVLine {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 2px;
  background: rgba(255,255,255,0.06);
  transform: translateX(-1px);
  pointer-events: none;
}

/* =========================
   AUTH (Desktop-friendly)
========================= */

.authBackground {
  min-height: 100vh;
  min-height: 100dvh;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 32px 16px;
  position: relative;
  overflow: hidden;

  background: linear-gradient(135deg, var(--authBgA) 0%, var(--authBgB) 55%, var(--authBgC) 100%);
}

.authBackground::before,
.authBackground::after {
  content: "";
  position: absolute;
  inset: -20%;
  pointer-events: none;
  will-change: transform;
  filter: blur(0px);
  opacity: 0.9;
}

.authBackground::before {
  background: radial-gradient(1200px 800px at 20% 20%, rgba(160, 220, 255, 0.85), transparent 55%);
  animation: authFloatA 18s ease-in-out infinite;
}

.authBackground::after {
  background: radial-gradient(1100px 700px at 80% 10%, rgba(198, 180, 255, 0.85), transparent 55%);
  animation: authFloatB 22s ease-in-out infinite;
  opacity: 0.85;
}

@keyframes authFloatA {
  0%   { transform: translate3d(-1.5%, -1.0%, 0) scale(1.02); }
  50%  { transform: translate3d( 1.8%,  1.2%, 0) scale(1.06); }
  100% { transform: translate3d(-1.5%, -1.0%, 0) scale(1.02); }
}

@keyframes authFloatB {
  0%   { transform: translate3d( 1.2%,  1.4%, 0) scale(1.02); }
  50%  { transform: translate3d(-1.6%, -1.0%, 0) scale(1.07); }
  100% { transform: translate3d( 1.2%,  1.4%, 0) scale(1.02); }
}

/* keep the card above the animated layers */
.authCard {
  position: relative;
  z-index: 1;
}

/* accessibility: disable motion if user prefers */
@media (prefers-reduced-motion: reduce) {
  .authBackground::before,
  .authBackground::after {
    animation: none;
  }
}

.authCard {
  width: min(420px, 92vw);
  padding: 26px 24px;
  border-radius: 16px;
  background: var(--authCardBg);
  border: 1px solid var(--authCardBorder);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  box-shadow: 0 14px 44px rgba(0, 0, 0, 0.22);
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.authHeaderSmall {
  font-size: 0.9rem;
  color: rgba(255,255,255,0.92);
  text-align: center;
  font-weight: 800;
  letter-spacing: 0.3px;
}

.authTitle {
  font-size: 2rem;
  color: #ffffff;
  text-align: center;
  margin: 0;
  font-weight: 1000;
  letter-spacing: 0.2px;
}

.authError {
  color: #fff2c7;
  background: rgba(140, 60, 0, 0.22);
  border: 1px solid rgba(255, 214, 122, 0.40);
  padding: 10px 12px;
  border-radius: 12px;
  font-weight: 900;
  font-size: 0.9rem;
  text-align: center;
}

.authInput {
  width: 100%;
  padding: 12px 14px;
  font-size: 1rem;
  border: 1px solid var(--authInputBorder);
  border-radius: 10px;
  background: var(--authInputBg);
  text-align: center;
  outline: none;
  color: var(--authText);
  font-weight: 700;
}

.authInput::placeholder { color: rgba(255,255,255,0.95); }

.authInput:focus {
  border-color: rgba(255,255,255,0.85);
  box-shadow: 0 0 0 4px rgba(255,255,255,0.16);
}

.authButton {
  background: var(--authBtnBg);
  color: var(--authBtnText);
  font-size: 1.1rem;
  padding: 12px 14px;
  border: none;
  border-radius: 999px;
  cursor: pointer;
  font-weight: 900;
}

.authButton:disabled { opacity: 0.7; cursor: default; }

.authLinks {
  text-align: center;
  margin-top: 4px;
}

.authLink {
  color: #ffffff;
  font-weight: 900;
  font-size: 0.95rem;
  text-decoration: none;
}

.authLink:hover { text-decoration: underline; }

@media (max-width: 420px) {
  .authCard { padding: 22px 18px; }
  .authTitle { font-size: 1.75rem; }
}

:root {
  --authBgA: #9fdcff;
  --authBgB: #cbb6ff;
  --authBgC: #f0d9ff;
  --authCardBg: rgba(255, 255, 255, 0.16);
  --authCardBorder: rgba(255, 255, 255, 0.28);
  --authText: rgba(255, 255, 255, 0.95);
  --authInputBg: rgba(255, 255, 255, 0.38);
  --authInputBorder: rgba(255, 255, 255, 0.55);
  --authBtnBg: rgba(255, 255, 255, 0.92);
  --authBtnText: #1b2a6b;
}

html[data-theme="dark"] {
  --authBgA: #0b1633;
  --authBgB: #24123f;
  --authBgC: #101b2e;
  --authCardBg: rgba(0, 0, 0, 0.28);
  --authCardBorder: rgba(255, 255, 255, 0.14);
  --authText: rgba(255, 255, 255, 0.92);
  --authInputBg: rgba(0, 0, 0, 0.22);
  --authInputBorder: rgba(255, 255, 255, 0.18);
  --authBtnBg: rgba(255, 255, 255, 0.92);
  --authBtnText: #1b2a6b;
}

.themeToggleBtn {
  padding: 10px 14px;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,0.22);
  background: rgba(0,0,0,0.12);
  color: rgba(255,255,255,0.95);
  font-weight: 900;
  cursor: pointer;
}

.themeToggleBtn_sm { padding: 8px 12px; font-size: 0.9rem; }
.themeToggleBtn_md { padding: 10px 14px; font-size: 0.95rem; }

.authThemeRow { margin-top: 12px; display: flex; justify-content: center; }

.calTaskSelected { outline: 2px solid rgba(255,255,255,0.75); outline-offset: 2px; border-radius: 10px; }

.calTaskRow { display: grid; grid-template-columns: 1fr 22px; gap: 8px; align-items: center; }
.calTaskName { min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.calTaskDragHandle { width: 22px; height: 18px; display: grid; place-items: center; font-weight: 1100; opacity: 0.85; border-radius: 8px; border: 2px solid rgba(255,255,255,0.18); background: rgba(0,0,0,0.14); cursor: grab; user-select: none; }
.calTaskDragHandle:active { cursor: grabbing; opacity: 1; }

.calTimedTask { height: 100%; border-radius: 12px; border: 2px solid rgba(255,255,255,0.18); background: rgba(0,0,0,0.18); font-weight: 950; font-size: 12px; line-height: 14px; padding: 6px 8px; position: relative; display: grid; grid-template-rows: auto 1fr auto; }
.calTimedTaskDone { opacity: 0.55; }

.calTimedTaskRow { display: grid; grid-template-columns: 1fr 22px; gap: 8px; align-items: center; }
.calTimedTaskName { min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

.calResizeHandle { position: absolute; left: 50%; transform: translateX(-50%); width: 26px; height: 18px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.22); background: rgba(0,0,0,0.22); display: grid; place-items: center; font-weight: 1100; opacity: 0.95; cursor: ns-resize; user-select: none; }
.calResizeHandleTop { top: -9px; }
.calResizeHandleBottom { bottom: -9px; }

.calTimedGhost { border: 2px dashed rgba(255,255,255,0.55); background: rgba(255,255,255,0.12); border-radius: 10px; z-index: 20; }

.calTimedTaskWrap { overflow: visible; }
.calTimedTask { overflow: visible; }
.calTimeInnerDay .calTimeGridSurface { min-width: 0; width: 100%; }
.calTimeInnerDay .calTimeGridArea { overflow-x: hidden; }
.calTimeInnerDay .calTimeScroll { overflow-x: hidden; }
.calTaskDragHandle { touch-action: none; }
.calResizeHandle { touch-action: none; }

.calTaskName, .calTimedTaskName, .calCellTaskLine { overflow: hidden; white-space: nowrap; text-overflow: clip; }
